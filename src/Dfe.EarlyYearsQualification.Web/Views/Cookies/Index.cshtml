@model Dfe.EarlyYearsQualification.Web.Models.Content.CookiesPageModel

@{
    ViewData["Title"] = "Cookies";
}

@section Scripts {
    <script type="text/javascript">
      $('#cookies-form').submit(function(e) {

        e.preventDefault();

        var checked = $("input[name='" + '@Model.CookiesAnswer' + "']:checked").val();

        if (checked === undefined)
        {
          $("#cookies-form-group").addClass("govuk-form-group--error");
          $("#cookies-choice-error").removeAttr('hidden');
          return;
        }

        $("#cookies-form-group").removeClass("govuk-form-group--error");
        $("#cookies-choice-error").attr('hidden', true);

         // TODO: write function to collect form data, and either clear cookies or do nothing

        $("#cookies-set-banner").removeAttr('hidden');

        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    </script>
}

<a href="javascript:window.history.back()" class="govuk-back-link">Back</a>
  <div class="govuk-grid-row">
    
    <div class="govuk-grid-column-full govuk-grid-column-two-thirds-from-desktop">
      <div id="cookies-set-banner" class="govuk-notification-banner govuk-notification-banner--success" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner" hidden>
        <div class="govuk-notification-banner__header">
          <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
            @Model.SuccessBannerHeading
          </h2>
        </div>
        <div class="govuk-notification-banner__content">
          <p class="govuk-notification-banner__heading">
            @Html.Raw(Model.SuccessBannerContent)
          </p>
        </div>
      </div>

        <h2 id="cookies-heading" class="govuk-heading-xl">@Model.Heading</h2>
        <div id="cookies-body">@Html.Raw(Model.BodyContent)</div>
        <form id="cookies-form">
          <div id="cookies-form-group" class="govuk-form-group">
            <fieldset class="govuk-fieldset" role="group" aria-describedby="cookies-choice-error">
            <p id="cookies-choice-error" class="govuk-error-message" hidden>
              <span class="govuk-visually-hidden">Error:</span> @Model.ErrorText
            </p>
            @foreach(var option in Model.Options)
            {
                <div class="govuk-radios__item">
                    @Html.RadioButtonFor(x => x.CookiesAnswer, option.Value, new {@class="govuk-radios__input", id=option.Value})
                    <label class="govuk-label govuk-radios__label" for="@option.Value">
                        @option.Label
                    </label>
                </div>
            }
          </div>
          <div class="govuk-form-group">
              <button id="cookies-button" class="govuk-button" data-module="govuk-button">
                  @Model.ButtonText
              </button>
          </div>
        </form>
    </div>
</div>